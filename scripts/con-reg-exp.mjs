/*! For license information please see con-reg-exp.mjs.LICENSE.txt */
let e="QVRZJQXVKRLADFFXZCQEIKOKJPIXJXKOMJXMYCAHDJZUFTGFMIVPCPLPNNVNCTPVXUXXNTLGVPPQOOHVFMJDZFWQYECCNYFL";function t(t){for(;2*t>e.length;)e=e.repeat(2);return"`"+e.substring(t,2*t)}function n(e){let n=t(3);for(;e.some((e=>e.indexOf(n)>=0));)n=t(n.length+1);return n}function r(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function i(e,t){return t?e.replace(/(?:[[\\\](){}/|^-]|&&|!!|##|\$\$|%%|\*\*|\+\+|,,|\.\.|::|;;|<<|==|>>|\?\?|@@|\^\^|``|~~)/g,"\\$&"):e.replace(/[\\\]^-]/g,"\\$&")}class s extends Error{}class o extends Error{constructor(e,t){super(t),this.position=e}}const a=/\s*(?:(?<begin>[{(])|(?<end>[)}])|(?<separator>[,;])|(?<label>[a-zA-Z_][a-zA-Z0-9_]*):|(?<keyword>[a-zA-Z0-9\u2011\\-]+)|(?<literal>(?<_literalQuote>["'])(?:\\.|.)*?\k<_literalQuote>)|<(?<identifier>.*?)>|\[(?<complement>\^)?(?<characterClass>(?:\\.|.)*?)\]|(?<prefix>`[A-Z]{3,})(?<index>[0-9]+)\}|(?<comment1>\/\*.*?\*\/)|(?<comment2>\/\/.*?)(?=[\r\n\u2028\u2029]|$))\s*/sy,l=/\s*(?:(?<begin>[{(])|(?<end>[)}])|(?<separator>[,;])|(?<label>[a-zA-Z_][a-zA-Z0-9_]*):|(?<keyword>[a-zA-Z0-9\u2011\\-]+)|(?<literal>(?<_literalQuote>["'])(?:\\.|.)*?\k<_literalQuote>)|<(?<identifier>.*?)>|(?<characterClassVMode>\[)(?<complement>\^)?|(?<prefix>`[A-Z]{3,})(?<index>[0-9]+)\}|(?<comment1>\/\*.*?\*\/)|(?<comment2>\/\/.*?)(?=[\r\n\u2028\u2029]|$))\s*/sy,c=/^(?<lazy>lazy-|non-greedy-)?(?:(?<optional>optional)|(?<repeat>repeat)|(?:repeat-)?(?:(?:at-)?(?:(?<least>least-)|(?<most>most-))(?<count>\d+)|(?<min>\d+)(?:-to-(?<max>\d+))?)(?:-times?)?)$/su;var p;function d(e,t){let n=0,r=t;for(;t<e.length;){let r=e[t];if("["===r)n++;else if("]"===r){if(0==n)return t;n--}else if("\\"===r&&++t===e.length)break;t++}throw new o(r,"Unterminated character class.")}function u(e,t,r,s){var c;let h,g=[],f=new RegExp(s.unicodeSets?l:a),x=0,y=new RegExp(t+"([0-9]+)\\}","g");for(;h=null===(c=f.exec(e))||void 0===c?void 0:c.groups;){if(void 0!==h.begin)g.push({position:x,type:p.Begin});else if(void 0!==h.end)g.push({position:x,type:p.End});else if(void 0!==h.separator)g.push({position:x,type:p.Separator});else if(void 0!==h.label)g.push({position:x,type:p.Label,text:h.label});else if(void 0!==h.keyword)g.push({position:x,type:p.Keyword,text:h.keyword.toLowerCase().replace(/\u2011/g,"-")});else if(void 0!==h.literal){let e=h.literal;e.indexOf(t)>=0&&(e=e.replace(y,((e,t)=>{let n=r[parseInt(t)];if("string"!=typeof n)throw new o(x,"Cannot interpolate expression to a string literal.");let i=JSON.stringify(n);return i.substring(1,i.length-1)})));try{g.push({position:x,type:p.Literal,text:new Function(`return ${e};`)()})}catch(e){throw new o(x,"Error parsing string literal.")}}else if(void 0!==h.identifier)g.push({position:x,type:p.Identifier,text:h.identifier});else if(void 0!==h.characterClass||void 0!==h.characterClassVMode){let n;if(void 0!==h.characterClass)n=h.characterClass;else{let t=d(e,f.lastIndex);n=e.substring(f.lastIndex,t),f.lastIndex=t+1}n.indexOf(t)>=0&&(n=n.replace(y,((e,t)=>{let n=r[parseInt(t)];if("string"!=typeof n)throw new o(x,"Cannot interpolate expression to a character class.");return i(n,s.unicodeSets)}))),g.push({position:x,type:p.CharacterClass,text:n,complement:!!h.complement})}else if(h.prefix===t){let e=r[parseInt(h.index)];if("string"==typeof e){let t=n([e]);g.push({position:x,type:p.InterpolationBegin,source:{sourceCode:e,interpolationPrefix:t,flags:s}}),g=g.concat(u(e,t,[],s)),g.push({position:x,type:p.InterpolationEnd})}else{if(s.ignoreCase!==e.flags.ignoreCase)throw new o(x,`Mismatching "ignoreCase" flag in interpolated expression. Outer expression: "${s.ignoreCase?"set":"unset"}", interpolated expression: "${e.flags.ignoreCase?"set":"unset"}".`);if(s.unicode!==e.flags.unicode)throw new o(x,`Mismatching "legacy" flag in interpolated expression. Outer expression: "${s.unicode?"unset":"set"}", interpolated expression: "${e.flags.unicode?"unset":"set"}".`);if(s.unicodeSets!==e.flags.unicodeSets)throw new o(x,`Mismatching "unicode" flag in interpolated expression. Outer expression: "${s.unicodeSets?"set":"unset"}", interpolated expression: "${e.flags.unicodeSets?"set":"unset"}".`);g.push({position:x,type:p.Begin}),g.push({position:x,type:p.InterpolationBegin,source:e}),g=g.concat(e.tokens),g.push({position:x,type:p.InterpolationEnd}),g.push({position:x,type:p.End})}}else if(void 0===h.comment1&&void 0===h.comment2)break;x=f.lastIndex}if(x<e.length)throw new o(x,"Syntax error.");return g}!function(e){e[e.Literal=0]="Literal",e[e.Identifier=1]="Identifier",e[e.Label=2]="Label",e[e.Keyword=3]="Keyword",e[e.CharacterClass=4]="CharacterClass",e[e.Begin=5]="Begin",e[e.End=6]="End",e[e.Separator=7]="Separator",e[e.InterpolationBegin=8]="InterpolationBegin",e[e.InterpolationEnd=9]="InterpolationEnd"}(p||(p={}));class h{constructor(e){this.info=e,this.interpolationStack=[],this.index=0,this.processInterpolation()}read(){let e=this.info.tokens[this.index++];return this.processInterpolation(),e}peek(){return this.info.tokens[this.index]}peekPrev(){return this.info.tokens[this.index-1]}error(e,t){let n=[{type:p.InterpolationBegin,position:0,source:this.info}];for(let t of this.info.tokens){if(t.type===p.InterpolationEnd&&n.pop(),e===t)break;t.type===p.InterpolationBegin&&n.push(t)}if(0===n.length)return new s(t);let r=null==e?void 0:e.position;void 0===r&&(r=this.info.sourceCode.length,n.splice(1));let i="";for(;n.length>0;){let e=n.pop();i+=this.formatError(e.source,r,t),r=e.position,t="Interpolated from:"}return new s(i.trimEnd())}formatError(e,t,n){var r;let i=e.sourceCode.substring(0,t).split("\n"),s=i.at(-1),o=(null===(r=e.sourceCode.substring(t).match(/^.*/))||void 0===r?void 0:r[0])||"",a=i.length,l=s.length+1;for(s=this.prettifySource(s,e),o=this.prettifySource(o,e),s.length>50&&(s=s.substring(s.length-50)),o.length>74&&(o=s.substring(0,74));s.length+o.length>74;)s.length>o.length?s=s.substring(1):o=s.substring(0,o.length-1);return s=s.trimStart(),o=o.trimEnd(),(n+=`\n    ${s}${o}\n`)+`    ${" ".repeat(s.length)}^- line ${a}, column ${l}\n`}prettifySource(e,t){let n=new RegExp(`${t.interpolationPrefix}[0-9]+}`,"g");return e.replace(n,(e=>`\${${".".repeat(e.length-3)}}`)).replace(/[\0- ]/," ")}processInterpolation(){for(;;){let e=this.info.tokens[this.index];if((null==e?void 0:e.type)===p.InterpolationBegin)this.index++,this.interpolationStack.push(e);else{if((null==e?void 0:e.type)!==p.InterpolationEnd)break;this.index++,this.interpolationStack.pop()}}}}class g{generateAtom(){return`(?:${this.generate()})`}generate(){return this.generateAtom()}}class f extends g{constructor(e){super(),this.items=e||[]}generate(){return this.items.map((e=>e instanceof x?e.generateAtom():e.generate())).join("")}}class x extends g{constructor(e){super(),this.items=e}generate(){return this.items.map((e=>e.generate())).join("|")}}class y extends g{constructor(e){super(),this.negative=e}}class m extends y{static create(e){let t;return e.type===p.CharacterClass&&this.complementaryValue[e.text]?(t=new m(e.complement),t.escapedText=e.text):e.type===p.Keyword&&this.keywords[e.text]&&(t=new m(!1),t.escapedText=this.keywords[e.text]),t}generateAtom(){return this.negative?m.complementaryValue[this.escapedText]:this.escapedText}}m.complementaryValue={"\\d":"\\D","\\D":"\\d","\\s":"\\S","\\S":"\\s","\\w":"\\W","\\W":"\\w"},m.keywords={digit:"\\d","white-space":"\\s",whitespace:"\\s","word-character":"\\w","word-char":"\\w"};class w extends y{static create(e,t){let n;return e.type===p.Literal&&(1===e.text.length||t.info.flags.unicode&&2===e.text.length&&/[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.text))?(n=new w(!1),n.unescapedText=e.text,n.vmode=t.info.flags.unicodeSets):e.type===p.Keyword&&this.keywords[e.text]?(n=new w(!1),n.unescapedText=this.keywords[e.text],n.vmode=t.info.flags.unicodeSets):e.type===p.CharacterClass&&1===e.text.length&&(n=new w(e.complement),n.unescapedText=e.text,n.vmode=t.info.flags.unicodeSets),n}generateAtom(){return this.negative?`[^${i(this.unescapedText,this.vmode)}]`:r(this.unescapedText)}}w.keywords={"\\n":"\n",nl:"\n","new-line":"\n",lf:"\n","line-feed":"\n","\\r":"\r",cr:"\r","carriage-return":"\r","\\t":"\t",tab:"\t",tabulation:"\t","\\0":"\0",null:"\0",nul:"\0",sp:" ",space:" ",nbsp:"Â "};class v extends y{static create(e){let t;return e.type===p.Keyword&&"any"===e.text&&(t=new v(!1)),t}generateAtom(){return this.negative?"[]":"."}}class b extends y{static create(e){let t;return e.type===p.CharacterClass?(t=new b(e.complement),t.escapedText=e.text):e.type===p.Keyword&&this.keywords[e.text]&&(t=new b(!1),t.escapedText=this.keywords[e.text]),t}generateAtom(){return`[${this.negative?"^":""}${this.escapedText}]`}}b.keywords={"line-terminator":"\\r\\n\\u2028\\u2029","line-term":"\\r\\n\\u2028\\u2029",terminator:"\\r\\n\\u2028\\u2029",term:"\\r\\n\\u2028\\u2029"};class k extends y{static create(e,t){let n;if(e.type===p.Keyword&&("prop"===e.text||"property"===e.text)){if(!t.info.flags.unicode)throw new s("Property requires <UNICODE> flag.");n=new k(!1);let r=t.read();if((null==r?void 0:r.type)!==p.Identifier)throw t.error(r||e,'Expecting identifier after "property".');n.property=r.text}return n}generateAtom(){return`\\${this.negative?"P":"p"}{${this.property}}`}}class $ extends g{static create(e){let t;return e.type===p.Literal&&(t=new $,t.unescapedText=e.text),t}generate(){return r(this.unescapedText)}}class C extends g{static create(e,t){let n;if(e.type===p.Keyword&&"match"===e.text){n=new C;let r=t.read();if((null==r?void 0:r.type)!==p.Identifier)throw t.error(r||e,'Expecting identifier after "match".');r.text.trim().match(/[1-9][0-9]*/)?n.text=`\\${r.text.trim()}`:n.text=`\\k<${r.text}>`}return n}generateAtom(){return this.text}}class I extends y{static create(e){let t;return e.type!==p.Keyword||"word-boundary"!==e.text&&"word-bound"!==e.text||(t=new I(!1)),t}generateAtom(){return this.negative?"\\B":"\\b"}}class E extends y{static create(e,t){let n;return e.type!==p.Keyword||"begin-of-line"!==e.text&&"start-of-line"!==e.text&&"end-of-line"!==e.text||(n=new E(!1),n.start="end-of-line"!==e.text,n.flags=t.info.flags),n}generateAtom(){return this.flags.multiline?this.start?this.negative?"(?<!^)":"^":this.negative?"(?!$)":"$":this.start?this.negative?"(?<![\\r\\n\\u2028\\u2029]|^)":"(?<=[\\r\\n\\u2028\\u2029]|^)":this.negative?"(?![\\r\\n\\u2028\\u2029]|$)":"(?=[\\r\\n\\u2028\\u2029]|$)"}}class S extends y{static create(e,t){let n;return e.type!==p.Keyword||"begin-of-text"!==e.text&&"start-of-text"!==e.text&&"end-of-text"!==e.text||(n=new S(!1),n.start="end-of-text"!==e.text,t.info.flags.multiline=!1),n}generateAtom(){return this.start?this.negative?"(?<!^)":"^":this.negative?"(?!$)":"$"}}class A extends g{static create(e,t){let n;return e.type===p.Keyword&&"group"===e.text?(n=new A,n.id=void 0,n.child=_(t)):e.type===p.Label&&(n=new A,n.id=e.text,n.child=_(t)),n}generateAtom(){return this.id?`(?<${this.id}>${this.child.generate()})`:`(${this.child.generate()})`}}class K extends y{static create(e,t){let n,r;if(e.type===p.Keyword&&(r=e.text.match(/^look-?(ahead|behind)$/))){n=new K(!1),n.ahead="ahead"===r[1];let e=t.peek();(null==e?void 0:e.type)===p.Keyword&&"not"===e.text&&(t.read(),n.negative=!0),n.child=_(t)}return n}generateAtom(){return`(?${this.ahead?"":"<"}${this.negative?"!":"="}${this.child.generate()})`}}class P extends g{static create(e,t){let n,r;if(e.type===p.Keyword&&(r=e.text.match(c))){let e=r.groups;n=new P,n.lazy=!!e.lazy,e.optional?(n.min=0,n.max=1):e.repeat?(n.min=0,n.max=1/0):e.least?(n.min=parseInt(e.count),n.max=1/0):e.most?(n.min=0,n.max=parseInt(e.count)):void 0!==e.max?(n.min=parseInt(e.min),n.max=parseInt(e.max)):(n.min=parseInt(e.min),n.max=parseInt(e.min)),n.child=_(t)}return n}generate(){let e=this.child.generateAtom();return this.max===1/0?0===this.min?e+="*":1===this.min?e+="+":e+=`{${this.min},}`:this.min===this.max?e+=`{${this.min}}`:0===this.min&&1===this.max?e+="?":e+=`{${this.min},${this.max}}`,this.lazy&&(e+="?"),e}}const T=Symbol("verboseRegExpInfo");function L(e){var t;let n=[],r=e.peek();for(;r&&r.type!==p.End;)if(r.type===p.Separator)e.read(),r=e.peek();else{let i=O(e);r=e.peek(),r&&r.type!==p.Separator&&(null===(t=e.peekPrev())||void 0===t?void 0:t.type)!==p.End&&e.error(r,"Expecting separator"),n.push(i)}return 0===n.length?new f:1===n.length?n[0]:new f(n)}function O(e){let t=_(e),n=e.peek();if((null==n?void 0:n.type)!==p.Keyword||"or"!==n.text.toLowerCase())return t;e.read();let r=O(e);return t instanceof x?(r instanceof x?t.items.push(...r.items):t.items.push(r),t):r instanceof x?(r.items.unshift(t),r):new x([t,r])}function _(e){let t,n=e.read();switch(null==n?void 0:n.type){case p.Begin:{let t=L(e),r=e.read();if((null==r?void 0:r.type)!==p.End)throw e.error(n,"Unterminated bracket.");return t}case void 0:throw e.error(void 0,"Unexpected end of expression.");case p.End:throw e.error(n,"Unexpected closing bracket.");case p.Separator:throw e.error(n,"Unexpected separator.");case p.Identifier:throw e.error(n,`Unexpected identifier "<${n.text}>".`);case p.InterpolationBegin:case p.InterpolationEnd:throw e.error(n,"Unexpected token.");case p.CharacterClass:case p.Label:case p.Keyword:case p.Literal:}if(n.type===p.Keyword&&"not"===n.text){if(t=_(e),!(t instanceof y))throw e.error(n,'The "not" keyword is not allowed before this expression.');t.negative=!t.negative}else t=m.create(n)||w.create(n,e)||v.create(n)||b.create(n)||k.create(n,e)||$.create(n)||C.create(n,e)||I.create(n)||E.create(n,e)||S.create(n,e)||A.create(n,e)||K.create(n,e)||P.create(n,e);if(!t)throw e.error(n,`Unknown keyword "${n.text}".`);return t}function B(e,t,n,r){let i,s={interpolationPrefix:t,sourceCode:e,tokens:[],flags:Object.assign({multiline:!0,indices:!1,global:!1,ignoreCase:!1,unicode:!0,unicodeSets:!1,sticky:!1,cache:!1},r)};try{s.tokens=u(e,t,n,s.flags),i=new h(s)}catch(e){if(e instanceof o)throw i=new h(s),i.error({position:e.position,type:p.Begin},e.message);throw e}let a=L(i).generate(),l="s";if(i.info.flags.indices&&(l+="d"),i.info.flags.global&&(l+="g"),i.info.flags.ignoreCase&&(l+="i"),i.info.flags.multiline&&(l+="m"),i.info.flags.sticky&&(l+="y"),i.info.flags.unicodeSets){if(!i.info.flags.unicode)throw i.error(void 0,'You cannot mix "legacy" and "unicode" flags.');l+="v"}else i.info.flags.unicode&&(l+="u");let c=new RegExp(a,l);return Object.defineProperty(c,T,{configurable:!1,enumerable:!1,value:s,writable:!1}),c}const M=new Map,F=new WeakMap;let V=1;const Z={};function z(e,t,...r){var i,o;try{let s=t.raw,a=n(s),l=s[0],c=[],p=e.cache?[]:void 0;for(let e=0;e<r.length;e++){let t=r[e];if(l+=a+e+"}"+s[e+1],t instanceof RegExp&&t[T]){c.push(t[T]);let e=F.get(t);void 0===e&&(e=V++,F.set(t,e)),null===(i=null==p?void 0:p.push)||void 0===i||i.call(p,e)}else"string"!=typeof t&&(t=`${t}`),c.push(t),null===(o=null==p?void 0:p.push)||void 0===o||o.call(p,t)}if(p){let e=M.get(l);for(let t=0;t<p.length&&e;t++)e instanceof Map&&(e=e.get(p[t]));if(e instanceof RegExp)return new RegExp(e)}let d=B(l,a,c,e);if(p){let e=M,t=l;for(let n=0;n<p.length;n++){let r=e.get(t);r instanceof Map||(r=new Map,e.set(t,r)),e=r,t=p[n]}e.set(t,d)}return d}catch(e){if(e instanceof s)throw new s(e.message);throw e}}const U={apply:(e,t,n)=>z(e(),...n),get(e,t){let n,r=e(),i=r._id+t;if(i in Z)return Z[i];switch(t){case"indices":n={indices:!0};break;case"global":n={global:!0};break;case"ignoreCase":n={ignoreCase:!0};break;case"legacy":n={unicode:!1};break;case"unicode":n={unicodeSets:!0};break;case"sticky":n={sticky:!0};break;case"cache":n={cache:!0}}let s=Object.assign(Object.assign(Object.assign({},r),n),{_id:i});return Z[i]=new Proxy((()=>s),U),Z[i]}};export default function D(e,...t){return z({},e,...t)}D.indices=new Proxy((()=>({_id:"indices",indices:!0})),U),D.global=new Proxy((()=>({_id:"global",global:!0})),U),D.ignoreCase=new Proxy((()=>({_id:"ignoreCase",ignoreCase:!0})),U),D.legacy=new Proxy((()=>({_id:"legacy",unicode:!1})),U),D.unicode=new Proxy((()=>({_id:"unicode",unicodeSets:!0})),U),D.sticky=new Proxy((()=>({_id:"sticky",sticky:!0})),U),D.cache=new Proxy((()=>({_id:"cache",cache:!0})),U),D.Error=s,D.default=D,D.cre=D;export{D as cre};